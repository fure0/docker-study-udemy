## dockerfile

Docker이미지를 코드화 한것

## RUN & CMD

+ 어느쪽이든 커맨드를 실행, 그러나 실행 타이밍이 다르다
+ RUN : Dockerfile -> image (이미지를 빌드할시에 실행)
+ CMD : image -> container (컨테이너가 구현될때 실행)

### dockerfile 예
```
FROM ubuntu:20.04
RUN apt-get update -y && \
    apt-get install -y nginx
CMD ["nginx", "-g", "daemon off;"]
```

### 빌드
docker bulid -t dockerfile-run-nginx [path]

### 실행
docker run -d -p 8081:80 --name dockerfile-run-nginx dockerfile-run-nginx

### COPY & ADD

+ 호스트 환경의 파일을 컨테이너 환경에 복사
+ ADD가 기능은 많으나 공식에선 제한된 사용을 위해 COPY를 권장

### ENV

```
FROM ubuntu:20.04
RUN apt-get update -y && \
    apt-get install -y nginx
ENV APP_ENV="production"
CMD ["nginx", "-g", "daemon off;"]
```

inspect로 확인가능

### Dockerfile로 커스텀 MariaDB이미지 작성

```
FROM mariadb:10.4
RUN apt-get update -y
COPY my.conf /etc/mysql/conf.d
COPY create-table.sql /docker-entrypoint-initdb.d
ENV MYSQL_USER=root
ENV MYSQL_DATABASE=docker
ENV MYSQL_ROOT_PASSWORD=root
```

docker build -t mymariadb mariadb/

docker run -d --name mymariadb mymariadb

docker exec -it mymariadb /bin/bash

mysql -u root -p